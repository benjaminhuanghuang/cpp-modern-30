

每个进程有自己的独立地址空间，不与其他进程分享；一个进程里可以有多个线程，彼此共享同一个地址空间。



堆内存、文件、套接字等资源都归进程管理，同一个进程里的多个线程可以共享使用。

每个进程占用的内存和其他资源，会在进程退出或被杀死时返回给操作系统。

并发应用开发可以用多进程或多线程的方式。多线程由于可以共享资源，效率较高；反
之，多进程（默认）不共享地址空间和资源，开发较为麻烦，在需要共享数据时效率也
较低。但多进程安全性较好，在某一个进程出问题时，其他进程一般不受影响；而在多
线程的情况下，一个线程执行了非法操作会导致整个进程退出。

编译器和处理器的重排问题
原子操作和数据竞争
互斥锁和死锁问题
无锁算法
条件变量
信号量


> Linux 上编译线程相关的代码都需要加上 -pthread 命令行参数。
> Windows 和 macOS 上则不需要。


## mutex
互斥量的基本语义是，一个互斥量只能被一个线程锁定，用来保护某个代码块在同一时间只
能被一个线程执行。

mutex 只可默认构造，不可拷贝（或移动），不可赋值，主要提供的方法
是：

lock：锁定，锁已经被其他线程获得时则阻塞执行
try_lock：尝试锁定，获得锁返回 true，在锁被其他线程获得时返回 false
unlock：解除锁定（只允许在已获得锁时调用）

recursive_mutex: 除了允许同一线程可以无阻塞地多次加锁
timed_mutex：允许锁定超时的互斥量
recursive_timed_mutex：允许锁定超时的递归互斥量
shared_mutex：允许共享和独占两种获得方式的互斥量
shared_timed_mutex：允许共享和独占两种获得方式的、允许锁定超时的互斥量



